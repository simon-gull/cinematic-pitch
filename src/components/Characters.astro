---
interface Character {
  name: string
  description: string
  image?: string
}

interface Props {
  characters: Character[]
}

const { characters = [] } = Astro.props
---

<section class="characters-section" style="background: #0A0A0A;">
  <div class="h-[6vh]"></div>

  <div class="max-w-7xl mx-auto px-6 md:px-16">
    <div class={`grid grid-cols-1 ${characters.length === 2 ? 'md:grid-cols-2' : 'md:grid-cols-2 lg:grid-cols-3'} gap-8 md:gap-12`}>
      {characters.map((char, i) => (
        <div class="character-card opacity-0" data-char-card data-char-delay={i * 0.15}>
          {char.image && (
            <div class="overflow-hidden mb-6" style="aspect-ratio: 3/4;">
              <img
                src={char.image}
                alt={char.name}
                class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-700"
              />
            </div>
          )}
          <h3 class="font-display text-2xl md:text-3xl font-light text-pitch-white mb-2">
            {char.name}
          </h3>
          <p class="font-body text-sm md:text-base font-light text-pitch-muted leading-relaxed">
            {char.description}
          </p>
        </div>
      ))}
    </div>
  </div>

  <div class="h-[6vh]"></div>
</section>

<script>
  import { gsap } from 'gsap'
  import { ScrollTrigger } from 'gsap/ScrollTrigger'
  gsap.registerPlugin(ScrollTrigger)

  document.querySelectorAll('[data-char-card]').forEach((el, i) => {
    gsap.fromTo(el,
      { opacity: 0, y: 30 },
      {
        opacity: 1, y: 0,
        ease: 'power2.out',
        scrollTrigger: {
          trigger: el.closest('.characters-section'),
          start: `${60 + i * 5}% bottom`,
          end: `${75 + i * 5}% bottom`,
          scrub: 0.4,
        }
      }
    )
  })
</script>
